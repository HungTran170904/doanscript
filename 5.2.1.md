CIS 5.2.1: Prefer using dedicated AKS Service Accounts
Description:
 In Azure Kubernetes Service (AKS), service accounts are used to grant access to Kubernetes resources for pods and workloads. It is considered a best practice to create and use dedicated service accounts for specific applications or workloads, rather than using the default service account. This check ensures that each application or workload uses a dedicated service account, reducing the risk of privilege escalation and improving security isolation.
 Default Value:
 By default, Kubernetes uses the default service account for all pods if no service account is specified. This should be avoided in favor of dedicated service accounts.

Pre-requisites:
 Ensure that Role-Based Access Control (RBAC) is configured and that service accounts are created and assigned to workloads as needed.
 Using Azure CLI:

List the service accounts in your AKS cluster using the following command:

 kubectl get serviceaccounts --all-namespaces
Generic
Verify that each application or workload is using its own dedicated service account and not the default service account.
Using Azure CLI:

Create a dedicated service account for your workload:

 kubectl create serviceaccount <service-account-name> --namespace=<namespace-name>
Generic
Create a role binding to assign the appropriate permissions to the service account:

kubectl create rolebinding <rolebinding-name> --role=<role-name> --serviceaccount=<namespace-name>:<service-account-name> --namespace=<namespace-name>
Generic
Update the deployment or pod specification to use the dedicated service account by adding the serviceAccountName field: